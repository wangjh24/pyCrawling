server {
    listen 80;  # 컨테이너 내부적으로 80번 포트에서 대기

    # 1. 화면(리액트) 요청 처리
    location / {
        root   /usr/share/nginx/html;  # 리액트 빌드 파일이 복사된 위치
        index  index.html index.htm;
        try_files $uri $uri/ /index.html; # 리액트 라우터 사용 시 404 방지용 필수 설정
    }

    # 2. 데이터(API) 요청 처리 (프록시 설정)
    # 브라우저가 http://localhost:5173/api/... 로 요청하면
    # Nginx가 이걸 받아서 http://backend:8000/api/... 로 배달해줍니다.
    location /api/ {
        proxy_pass http://backend:8000; 
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}